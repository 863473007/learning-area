<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
   <!-- <script language="JavaScript" src="js/jquery-3.4.0.min.js"/>
    <script language="JavaScript" src="js/marco.js"/>-->
    <title>Title</title>

</head>
<body>
<h2>hello world</h2>
<div>
    <button id="marco">Send to Marco</button>
</div>
    <script>
        var marco = document.getElementById("marco");
        marco.addEventListener("click",function(){
           console.log("hello");
            console.log("hello world");
            var url = "ws://localhost:8080/SpringWebSocketMoarcoPolo/marco"
            var sock = new WebSocket(url);
            sock.onopen = function(){
                console.log("Openging");
                sayMarco(sock);
            }

            sock.onmessage = function(e){
                console.log("Received message; ", e.data);
                setTimeout(function(){sayMarco(sock)}, 2000);
            }

            sock.onclose = function(){
                console.log("Closing");
            }
        });

        function sayMarco(sock){
            console.log("Sending Marco!");
            sock.send("Marco!");
        }
    </script>
</body>
</html>